# Internal Developer Guide - Claude Skills System

**Audience**: RHDP Team, Claude Skills Maintainers, Content Developers
**Last Updated**: January 2026
**Maintained By**: Prakhar Srivastava, Red Hat Technical Marketing

---

## Table of Contents

1. [Repository Structure](#repository-structure)
2. [Skill Definitions](#skill-definitions)
3. [Verification Prompts](#verification-prompts)
4. [Shared Rules and Contracts](#shared-rules-and-contracts)
5. [Template and Example Files](#template-and-example-files)
6. [Workflow Architecture](#workflow-architecture)
7. [AgnosticV Integration](#agnosticv-integration)
8. [Quality Standards](#quality-standards)
9. [Maintenance and Updates](#maintenance-and-updates)

---

## Repository Structure

```
.claude/
├── docs/
│   └── SKILL-COMMON-RULES.md           # Shared contracts for all skills
├── prompts/                            # Verification prompts used by skills
│   ├── enhanced_verification_workshop.txt
│   ├── enhanced_verification_demo.txt
│   ├── redhat_style_guide_validation.txt
│   ├── verify_workshop_structure.txt
│   ├── verify_technical_accuracy_workshop.txt
│   ├── verify_technical_accuracy_demo.txt
│   ├── verify_accessibility_compliance_workshop.txt
│   ├── verify_accessibility_compliance_demo.txt
│   ├── verify_accessibility_compliance.txt
│   └── verify_content_quality.txt
├── skills/                             # Skill definitions
│   ├── create-lab/
│   │   └── SKILL.md                    # Workshop module generator
│   ├── create-demo/
│   │   └── SKILL.md                    # Demo module generator
│   └── verify-content/
│       └── SKILL.md                    # Content verification
└── INTERNAL-DEVELOPER-GUIDE.md         # This file

content/modules/ROOT/pages/
├── workshop/
│   ├── templates/                      # Workshop templates
│   │   ├── 00-index.adoc
│   │   ├── 01-overview.adoc
│   │   ├── 02-details.adoc
│   │   └── 03-module-01.adoc
│   └── example/                        # Complete workshop example
│       ├── 00-index.adoc
│       ├── 01-overview.adoc
│       ├── 02-details.adoc
│       └── 03-module-01.adoc
└── demo/                               # Demo examples
    └── example/

CLAUDE-SKILLS-GUIDE.adoc                # User-facing quick guide (root)
```

---

## Skill Definitions

### 1. `create-lab` - Workshop Module Generator

**File**: `.claude/skills/create-lab/SKILL.md`

**Purpose**: Generate hands-on workshop modules with step-by-step instructions, verification commands, and progressive learning structure.

**Key Features**:
- First module vs continuation detection
- Overall workshop story planning (if first module)
- Optional AgnosticV catalog creation
- Reads templates from `content/modules/ROOT/pages/workshop/`
- Reads verification prompts before generation
- Creates: `index.adoc`, `01-overview.adoc`, `02-details.adoc`, `module-01-*.adoc`
- Auto-updates `nav.adoc`

**Workflow Steps**:
1. Determine context (NEW vs EXISTING lab)
1.5. Ask for target directory (if not provided as argument)
2. Plan overall story (if NEW lab)
2.1. Update lab configuration files (site.yml, antora.yml)
2.5. Optional: AgV catalog assistance
3. Gather module details
4. Get UserInfo variables
5. Handle diagrams, screenshots, code blocks
6. Fetch and analyze references
7. Read templates and verification criteria
8. Generate module content (using verification criteria)
9. Final quality check
10. Update navigation
11. Deliver (with token management)
12. Offer conclusion module (optional)

**Files Read**:
- `.claude/skills/create-lab/SKILL.md`
- `.claude/docs/SKILL-COMMON-RULES.md`
- `.claude/prompts/redhat_style_guide_validation.txt`
- `content/modules/ROOT/pages/workshop/templates/03-module-01.adoc`
- `content/modules/ROOT/pages/workshop/example/00-index.adoc`
- `content/modules/ROOT/pages/workshop/example/01-overview.adoc`
- `content/modules/ROOT/pages/workshop/example/02-details.adoc`
- `content/modules/ROOT/pages/workshop/example/03-module-01.adoc`

**Files Written**:
- `content/modules/ROOT/pages/index.adoc` (if first module)
- `content/modules/ROOT/pages/01-overview.adoc` (if first module)
- `content/modules/ROOT/pages/02-details.adoc` (if first module)
- `content/modules/ROOT/pages/module-XX-<slug>.adoc`
- `content/modules/ROOT/nav.adoc` (updated)

---

### 2. `create-demo` - Demo Content Generator

**File**: `.claude/skills/create-demo/SKILL.md`

**Purpose**: Generate presenter-led demo modules with Know/Show structure and business value messaging.

**Key Features**:
- Know sections: Business context, pain points, ROI
- Show sections: Technical demonstration steps
- Optional AgnosticV catalog creation
- Presenter guidance and tips
- Business metrics quantification

**Workflow Steps**:
1. Determine context (NEW vs EXISTING demo)
1.5. Ask for target directory (if not provided as argument)
2. Plan demo narrative and business story (if NEW demo)
2.5. Optional: AgV catalog assistance
3. Gather module details
4. Get UserInfo variables
5. Handle diagrams, screenshots, demo scripts
6. Fetch and analyze references
7. Read templates and verification criteria
8. Generate Know/Show structured content (using verification criteria)
9. Validate with agents
10. Update navigation
11. Deliver (with token management)
12. Offer conclusion module (optional)

**Files Read**:
- `.claude/skills/create-demo/SKILL.md`
- `.claude/docs/SKILL-COMMON-RULES.md`
- `.claude/prompts/redhat_style_guide_validation.txt`
- `content/modules/ROOT/pages/demo/example/`

**Files Written**:
- Demo module files (similar structure to create-lab)
- `content/modules/ROOT/nav.adoc` (updated)

---

### 3. `verify-content` - Content Quality Verification

**File**: `.claude/skills/verify-content/SKILL.md`

**Purpose**: Run comprehensive quality checks on workshop or demo content using Red Hat standards.

**Key Features**:
- Red Hat Corporate Style Guide compliance
- Technical accuracy validation
- Accessibility standards (WCAG 2.1 AA)
- Workshop/demo structure validation
- Single file or batch verification

**Verification Frameworks Used**:
- For workshops: `enhanced_verification_workshop.txt`
- For demos: `enhanced_verification_demo.txt`
- Common: All other verification prompts

**Workflow Steps**:
1. Identify content type (workshop/demo)
2. Locate content (single file or pattern)
3. Run verification agents with prompts
4. Present results (critical/warnings/recommendations)
5. Optional: Apply fixes automatically

**Files Read** (all prompts):
- `.claude/prompts/enhanced_verification_workshop.txt`
- `.claude/prompts/enhanced_verification_demo.txt`
- `.claude/prompts/redhat_style_guide_validation.txt`
- `.claude/prompts/verify_workshop_structure.txt`
- `.claude/prompts/verify_technical_accuracy_workshop.txt`
- `.claude/prompts/verify_technical_accuracy_demo.txt`
- `.claude/prompts/verify_accessibility_compliance_workshop.txt`
- `.claude/prompts/verify_accessibility_compliance_demo.txt`
- `.claude/prompts/verify_content_quality.txt`

---

## Verification Prompts

All prompts located in `.claude/prompts/`

### Workshop-Specific Prompts

#### `enhanced_verification_workshop.txt`
**Purpose**: Overall quality assessment for workshop content
**Checks**:
- Learning objectives clarity
- Exercise structure and progression
- Verification checkpoints
- Troubleshooting completeness
- Learning outcomes
- Business context integration

#### `verify_workshop_structure.txt`
**Purpose**: Workshop-specific structure validation
**Checks**:
- Proper module numbering
- Exercise organization
- Step-by-step instruction format
- Verification command placement
- Troubleshooting section presence
- Learning outcomes section

#### `verify_technical_accuracy_workshop.txt`
**Purpose**: Technical accuracy for workshop commands and procedures
**Checks**:
- Valid CLI commands
- Correct syntax for current versions
- Working code examples
- Accurate file paths
- Expected outputs match reality

#### `verify_accessibility_compliance_workshop.txt`
**Purpose**: Accessibility standards for workshop content
**Checks**:
- Alt text for all images
- Proper heading hierarchy
- Keyboard-accessible instructions
- Clear, inclusive language
- Color contrast (if applicable)

---

### Demo-Specific Prompts

#### `enhanced_verification_demo.txt`
**Purpose**: Overall quality assessment for demo content
**Checks**:
- Know/Show separation
- Business value messaging
- Presenter guidance clarity
- ROI quantification
- Visual cues for slides

#### `verify_technical_accuracy_demo.txt`
**Purpose**: Technical accuracy for demo procedures
**Checks**:
- Accurate technical steps
- Working demonstrations
- Correct product names
- Version-appropriate features

#### `verify_accessibility_compliance_demo.txt`
**Purpose**: Accessibility standards for demo content
**Checks**:
- Alt text for diagrams
- Inclusive language
- Clear visual cues

---

### Common Prompts (Used by Both)

#### `redhat_style_guide_validation.txt`
**Purpose**: Red Hat Corporate Style Guide compliance
**Checks**:
- Sentence case headlines (not title case)
- Official Red Hat product names (no abbreviations)
- Numbers as numerals
- No vague language (robust, leverage, powerful)
- No unsupported superlatives (best, leading)
- Inclusive language (allowlist/blocklist)
- Serial commas and proper hyphenation

#### `verify_content_quality.txt`
**Purpose**: General content quality checks
**Checks**:
- Complete prerequisites
- Consistent formatting
- Proper AsciiDoc syntax
- References and citations
- Professional tone
- No spelling/grammar errors

#### `verify_accessibility_compliance.txt`
**Purpose**: General accessibility compliance (WCAG 2.1 AA)
**Checks**:
- Image alt text descriptive (not generic)
- Heading hierarchy (h1 → h2 → h3)
- Sufficient color contrast
- Keyboard navigation support
- Clear language

---

## Shared Rules and Contracts

**File**: `.claude/docs/SKILL-COMMON-RULES.md`

All skills MUST follow these contracts:

### 1. Version Pinning or Attribute Placeholders

**Rule**: Never hardcode version-specific values. Use placeholders.

```asciidoc
✅ CORRECT:
Log into OpenShift Console at {openshift_console_url}
Username: {openshift_cluster_admin_username}
Tested on OpenShift {ocp_version}

❌ INCORRECT:
Log into https://console-openshift-console.apps.cluster-abc123.dynamic.redhat.com
Username: admin
Tested on OpenShift 4.18
```

### 2. Reference Enforcement

**Rule**: Every non-trivial claim must be backed by provided references.

**Implementation**:
- Track which reference supports which section
- Mark unsupported claims: `**Reference needed**: <claim>`
- Add "References" section at end of module
- If references conflict, document the decision

### 3. Attribute File Location

**Rule**: Do NOT create `_attributes.adoc` with hardcoded values.

**Rationale**: Every RHDP deployment gets new dynamic values from AgV catalog's `agnosticd_user_info`.

**Implementation**: Use dynamic placeholders in content that get populated at runtime.

### 4. Image Path Conventions

**Rule**: All images go in `content/modules/ROOT/assets/images/` (no subdirectories)

```asciidoc
✅ CORRECT:
image::pipeline-execution-1.png[Tekton pipeline showing tasks,width=700]

❌ INCORRECT:
image::images/pipeline-execution-1.png[...]
image::module-01/pipeline-execution-1.png[...]
```

**Requirements for every image**:
1. Meaningful alt text (accessibility)
2. Width guidance (500-800px typical)
3. Descriptive filename (no generic names)

### 5. Navigation Update Expectations

**Rule**: Skills MUST automatically update `content/modules/ROOT/nav.adoc`

**Implementation**:
- Read existing nav.adoc first
- Keep index.adoc at top
- Maintain sequential ordering
- Add new module in correct position
- Do NOT overwrite without confirmation

### 6. Failure-Mode Behavior

**Rule**: If skill cannot proceed safely, STOP and ask user.

**Examples**:
- Module number conflicts with existing file → Warn user
- No AgV access but catalog needed → Ask for fallback
- Cannot find reference materials → Ask for clarification

---

## Template and Example Files

### Workshop Templates

**Location**: `content/modules/ROOT/pages/workshop/templates/`

Files:
- `00-index.adoc` - Workshop facilitator guide template
- `01-overview.adoc` - Business scenario and objectives template
- `02-details.adoc` - Timing, requirements, setup template
- `03-module-01.adoc` - First module template

**Usage**: Skills read these to understand structure before generating.

### Workshop Examples

**Location**: `content/modules/ROOT/pages/workshop/example/`

Files:
- `00-index.adoc` - Complete index example
- `01-overview.adoc` - Complete overview example
- `02-details.adoc` - Complete details example
- `03-module-01.adoc` - Complete first module example

**Usage**: Skills read these to learn proper formatting and content patterns.

### Demo Examples

**Location**: `content/modules/ROOT/pages/demo/example/`

**Usage**: Skills read demo examples to understand Know/Show structure.

---

## Workflow Architecture

### Critical Workflow Fixes (Implemented)

#### 1. UUID Generation (Before File Creation)

**Problem**: Old way inserted placeholder UUID requiring manual edit.

**Fix**:
```bash
# Skills now ask for UUID before creating files
Ask user: "Run uuidgen and paste UUID here"
User provides: C0948860-3F44-4D96-B360-E922173AE6D0
Insert UUID directly into common.yaml template
Create files with correct UUID
```

#### 2. Showroom Repository Auto-Detection

**Fix**:
```bash
# Detects from current directory
git -C $(pwd) remote get-url origin

# Converts SSH to HTTPS
git@github.com:rhpds/showroom-name.git
→ https://github.com/rhpds/showroom-name.git

# Confirms with user before using
```

#### 3. Reference Catalog as Template

**Fix**: Use existing catalogs as structural templates. Only modify:
- UUID
- display_name
- showroom repo
- workloads

Preserve:
- includes
- components
- propagate_provision_data

**Why**: Prevents schema validation errors.

#### 4. Verification Prompts Integration

**Fix**: Skills read ALL verification prompts before generating content.

**Implementation**:
```
Before generation, read:
  for create-lab:
    - redhat_style_guide_validation.txt
    - verify_workshop_structure.txt (conceptually)
    - All workshop templates and examples

  for create-demo:
    - redhat_style_guide_validation.txt
    - Demo templates and examples
```

---

## AgnosticV Integration

### AgV Workflow in Skills

Both `create-lab` and `create-demo` offer **optional** AgV catalog assistance (Step 2.5).

**Flow**:
```
1. Ask: Do you need AgV help? [Yes/No]
2. If YES:
   a. Get AgV repo path (REQUIRED for reference)
   b. Ask if user knows similar catalog name
   c. Search existing catalogs by name or keywords
   d. Show top matches with details
   e. User selects: Use existing / Create new based on template
   f. If creating new:
      - Choose directory (agd_v2/ or openshift_cnv/)
      - Generate UUID (ask user to run uuidgen)
      - Auto-detect Showroom repo
      - Select workloads
      - Create branch (no feature/ prefix)
      - Generate catalog files
   g. Ask: Have you tested in RHDP Integration? [Yes/No/Skip]
   h. If tested, proceed to module creation
3. If NO: Use placeholder attributes, proceed to module creation
```

### AgV Testing Workflow

**CRITICAL**: Before module creation, user should test catalog in RHDP Integration.

**Steps**:
1. Create PR (auto-labeled for integration)
2. Login to https://integration.demo.redhat.com
3. Search for catalog by display name
4. Order catalog
5. Wait 1-2 hours for provisioning
6. Go to "My services" → Details → Advanced settings
7. Copy UserInfo variables
8. Verify workloads provision correctly
9. Share Advanced settings output for module creation
10. Send PR to RHDP team for merge

**UserInfo Variables Example**:
```bash
openshift_cluster_console_url=https://console-openshift...
openshift_api_server_url=https://api.cluster...
openshift_cluster_admin_username=admin
openshift_cluster_admin_password=xxxxx
gitea_console_url=https://gitea-gitea...
custom_workload_variable=value
```

### Git Workflow for AgV

```bash
# Before creating files:
cd /path/to/agnosticv
git checkout master  # (AgV uses master not main)
git pull origin master
git checkout -b catalog-slug  # No feature/ prefix

# After files created:
# User manually reviews, commits, and pushes
```

---

## Quality Standards

### Red Hat Corporate Style Guide

All content must follow:
- ✅ Headlines in sentence case (not title case)
- ✅ Official Red Hat product names (no abbreviations like "OCP")
- ✅ Numbers as numerals (use "5 steps" not "five steps")
- ✅ No vague language ("robust", "leverage", "powerful")
- ✅ No unsupported superlatives ("best", "leading" without citations)
- ✅ Inclusive language (allowlist/blocklist not whitelist/blacklist)
- ✅ Serial commas and proper hyphenation

### Technical Accuracy

- ✅ Valid commands for current product versions
- ✅ Correct syntax and options
- ✅ Working code examples
- ✅ Accurate technical terminology
- ✅ Verification commands with expected outputs

### Workshop Structure (Labs)

- ✅ Clear learning objectives (3-4 items)
- ✅ Step-by-step instructions
- ✅ Verification checkpoints after major steps
- ✅ Troubleshooting section (top 3-5 issues)
- ✅ Learning outcomes section
- ✅ Progressive skill building
- ✅ Business context and scenarios

### Demo Structure (Demos)

- ✅ Know/Show separation
- ✅ Business value messaging
- ✅ Quantified metrics and ROI
- ✅ Presenter guidance and tips
- ✅ Visual cues for slides/diagrams
- ✅ Troubleshooting for presenters

### Accessibility (WCAG 2.1 AA)

- ✅ Alt text for all images (descriptive, not generic)
- ✅ Proper heading hierarchy (h1 → h2 → h3)
- ✅ Sufficient color contrast
- ✅ Keyboard-accessible instructions
- ✅ Clear, inclusive language

### AsciiDoc Formatting (CRITICAL - Added Jan 12, 2026)

**List Formatting Requirements:**
- ✅ Blank line BEFORE every list
- ✅ Blank line AFTER every list (before next content)
- ✅ Blank line after bold headings (`**Text:**`) before lists
- ✅ Blank line after colons (`:`) before lists

**Image Requirements:**
- ✅ All images must include `link=self,window=blank`
- ✅ Makes images clickable to open full-size in new tab
- ✅ Prevents users from losing their place

**Why This Matters:**
- Lists without blank lines cause text to run together when rendered
- Makes content unreadable and unprofessional
- Damages Red Hat brand credibility
- Images without clickable links frustrate users trying to see details

**Example:**
```asciidoc
❌ WRONG - Text runs together:
**Prerequisites:**
* OpenShift installed
* Admin access
Next section...

✅ CORRECT - Proper spacing:
**Prerequisites:**

* OpenShift installed
* Admin access

Next section...

❌ WRONG - Image not clickable:
image::diagram.png[Diagram,width=700]

✅ CORRECT - Clickable image:
image::diagram.png[Diagram,link=self,window=blank,width=700]
```

**Verification:**
- `/verify-content` actively scans for these violations
- Provides specific before/after examples
- Shows exact file locations and fix instructions

---

## Maintenance and Updates

### When to Update Skills

1. **Red Hat product version changes**: Update verification prompts with new commands/syntax
2. **Style guide updates**: Update `redhat_style_guide_validation.txt`
3. **AgV schema changes**: Update AgV workflow in SKILL-COMMON-RULES.md
4. **New accessibility standards**: Update accessibility prompts
5. **User feedback**: Critical workflow issues

### How to Update Skills

1. Update skill SKILL.md file in `.claude/skills/<skill-name>/`
2. Update shared rules in `.claude/docs/SKILL-COMMON-RULES.md` if applicable
3. Update verification prompts in `.claude/prompts/` if needed
4. Update templates/examples if structure changes
5. Test with real content generation
6. Document changes in this guide

### Version History

**January 12, 2026** - AsciiDoc Formatting Enforcement
- Added mandatory blank line requirements for all lists
- All images must now include `link=self,window=blank` for clickability
- Updated verification prompts to actively scan for formatting violations
- Fixed demo template (02-details.adoc) with proper spacing
- Added AsciiDoc Formatting section to Quality Standards
- Updated SKILL-COMMON-RULES.md with section 4 (List Formatting)
- Updated both create-lab and create-demo skills with clickable image requirements
- Created CHANGELOG-2026-01-12.md with complete documentation
- Updated CLAUDE-SKILLS-GUIDE.adoc with Common Formatting Issues section
- Files changed: 8 files, 322 insertions(+), 14 deletions(-)

**January 9, 2026** - Interactive Questions Update
- Made all questions conversational and friendly
- Added Step 1.5: Target directory prompt in interactive mode
- Simplified AgV question from 4 to 3 options
- Fixed "first module" redundancy (changed to "NEW demo/lab")
- Added welcome messages and emojis for better UX
- Created CLAUDE-SKILLS-GUIDE.adoc (user-facing quick guide)
- Updated lab name configuration (Step 2.1) to update site.yml and antora.yml
- Moved templates from content/modules/ROOT/pages/ to .claude/templates/
- Embedded conclusion templates in skills (removed external file dependency)
- Added SA action items to demo conclusions
- Removed certification sections (not applicable for internal RHDP)

**January 2026** - Initial release
- Created create-lab, create-demo, verify-content, blog-generate skills
- Implemented 4 critical workflow fixes:
  - UUID generation before file creation
  - Showroom repo auto-detection
  - Reference catalog as template
  - Verification prompts integration
- Created comprehensive prompt library
- Established shared rules and contracts

### Known Issues and Limitations

None currently. Report issues to Prakhar Srivastava or RHDP team.

---

## Support and Contact

**Maintained By**: Prakhar Srivastava, Manager – Technical Marketing
**Team**: Red Hat Technical Marketing / RHDP
**Contact**: Submit issues via repository or contact RHDP team

**Contributors**:
- Prakhar Srivastava - Skills Development & Maintenance
- Nate Stephany - RHDP Catalog Owner

---

## Appendix: File Reference Quick Links

### Skill Definitions
- [create-lab SKILL.md](skills/create-lab/SKILL.md)
- [create-demo SKILL.md](skills/create-demo/SKILL.md)
- [verify-content SKILL.md](skills/verify-content/SKILL.md)

### Shared Rules
- [SKILL-COMMON-RULES.md](docs/SKILL-COMMON-RULES.md)

### Verification Prompts (Workshop)
- [enhanced_verification_workshop.txt](prompts/enhanced_verification_workshop.txt)
- [verify_workshop_structure.txt](prompts/verify_workshop_structure.txt)
- [verify_technical_accuracy_workshop.txt](prompts/verify_technical_accuracy_workshop.txt)
- [verify_accessibility_compliance_workshop.txt](prompts/verify_accessibility_compliance_workshop.txt)

### Verification Prompts (Demo)
- [enhanced_verification_demo.txt](prompts/enhanced_verification_demo.txt)
- [verify_technical_accuracy_demo.txt](prompts/verify_technical_accuracy_demo.txt)
- [verify_accessibility_compliance_demo.txt](prompts/verify_accessibility_compliance_demo.txt)

### Verification Prompts (Common)
- [redhat_style_guide_validation.txt](prompts/redhat_style_guide_validation.txt)
- [verify_content_quality.txt](prompts/verify_content_quality.txt)
- [verify_accessibility_compliance.txt](prompts/verify_accessibility_compliance.txt)

### Templates and Examples
- [Workshop Templates](../content/modules/ROOT/pages/workshop/templates/)
- [Workshop Examples](../content/modules/ROOT/pages/workshop/example/)
- [Demo Examples](../content/modules/ROOT/pages/demo/)

---

**End of Internal Developer Guide**
